# ЁЯзк р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ъ

## ЁЯУЛ р╕кр╕▓р╕гр╕Ър╕▒р╕Н

1. [р╕Бр╕▓р╕гр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕гр╕░р╕Ър╕Ъ](#р╕Бр╕▓р╕гр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕гр╕░р╕Ър╕Ъ)
2. [р╕Чр╕Фр╕кр╕нр╕Ъ Cloudflare Tunnel](#р╕Чр╕Фр╕кр╕нр╕Ъ-cloudflare-tunnel)
3. [р╕Чр╕Фр╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ър╣Бр╕Кр╕Ч](#р╕Чр╕Фр╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ър╣Бр╕Кр╕Ч)
4. [р╕Чр╕Фр╕кр╕нр╕Ър╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕ер╕░ Export](#р╕Чр╕Фр╕кр╕нр╕Ър╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕ер╕░-export)
5. [р╕Чр╕Фр╕кр╕нр╕Ъ Sync р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З](#р╕Чр╕Фр╕кр╕нр╕Ъ-sync-р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З)
6. [Troubleshooting](#troubleshooting)

---

## ЁЯЪА р╕Бр╕▓р╕гр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕гр╕░р╕Ър╕Ъ

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 1: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Dependencies

```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Node.js р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╣Йр╕з
node --version

# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ npm р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╣Йр╕з
npm --version
```

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 2: р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Dependencies

```bash
# р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Frontend dependencies
npm install

# р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Backend dependencies
cd line-webhook
npm install
cd ..
```

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 3: р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕гр╕░р╕Ър╕Ъ

#### р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 1: р╣Гр╕Кр╣Й Batch File (р╣Бр╕Щр╕░р╕Щр╕│)

**Windows:**
```bash
# р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Гр╕Щр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З (localhost)
START_SERVERS.bat

# р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Ир╕▓р╕Бр╕ар╕▓р╕вр╕Щр╕нр╕Б (ngrok)
START_EXTERNAL.bat

# р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Ир╕▓р╕Бр╕ар╕▓р╕вр╕Щр╕нр╕Б (Cloudflare Tunnel)
START_CLOUDFLARE.bat
```

#### р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 2: р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╣Бр╕Ър╕Ъ Manual

**Terminal 1 - Backend:**
```bash
cd line-webhook
npm start
```

**Terminal 2 - Frontend:**
```bash
npm run dev
```

**Terminal 3 - Cloudflare Tunnel (р╕Цр╣Йр╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г):**
```bash
cloudflared.exe tunnel --url http://localhost:3000
cloudflared.exe tunnel --url http://localhost:8085
```

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 4: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕гр╕░р╕Ър╕Ър╕Чр╕│р╕Зр╕▓р╕Щ

1. **Backend:** р╣Ар╕Ыр╕┤р╕Ф http://localhost:3000/health
   - р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щ: `{"status":"ok","message":"Server is running"}`

2. **Frontend:** р╣Ар╕Ыр╕┤р╕Ф http://localhost:8085
   - р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ър╣Бр╕нр╕Ы

3. **Database:** р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ database р╕Цр╕╣р╕Бр╕кр╕гр╣Йр╕▓р╕З
   - р╣Др╕Яр╕ер╣М: `line-webhook/data/pos_chat.db` р╕Др╕зр╕гр╕бр╕╡р╕нр╕вр╕╣р╣И

---

## ЁЯМР р╕Чр╕Фр╕кр╕нр╕Ъ Cloudflare Tunnel

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 1: р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф Cloudflare Tunnel

1. р╣Др╕Ыр╕Чр╕╡р╣И: https://github.com/cloudflare/cloudflared/releases
2. р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф `cloudflared-windows-amd64.exe`
3. р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Кр╕╖р╣Ир╕нр╣Ар╕Ыр╣Зр╕Щ `cloudflared.exe`
4. р╕зр╕▓р╕Зр╣Др╕зр╣Йр╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М (root)

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 2: р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ Tunnel

```bash
# Terminal 1: Backend Tunnel
cloudflared.exe tunnel --url http://localhost:3000

# Terminal 2: Frontend Tunnel
cloudflared.exe tunnel --url http://localhost:8085
```

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 3: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ URL

- Backend URL: `https://xxxx.trycloudflare.com`
- Frontend URL: `https://yyyy.trycloudflare.com`

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 4: р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Frontend

1. р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `.env` р╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М root:
```env
VITE_API_URL=https://xxxx.trycloudflare.com
```

2. Restart Frontend:
```bash
# р╕Бр╕Ф Ctrl+C р╣Ар╕Юр╕╖р╣Ир╕нр╕лр╕вр╕╕р╕Ф Frontend
npm run dev
```

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 5: р╕Чр╕Фр╕кр╕нр╕Ър╕Ир╕▓р╕Бр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕нр╕╖р╣Ир╕Щ

1. р╣Ар╕Ыр╕┤р╕Фр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣Мр╣Гр╕Щр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕нр╕╖р╣Ир╕Щ
2. р╣Др╕Ыр╕Чр╕╡р╣И Frontend URL: `https://yyyy.trycloudflare.com`
3. р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ър╣Бр╕нр╕Ы

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 6: р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ LINE Webhook

1. р╣Др╕Ыр╕Чр╕╡р╣И LINE Developers Console
2. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Webhook URL: `https://xxxx.trycloudflare.com/webhook/line`
3. р╕Чр╕Фр╕кр╕нр╕Ър╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Ир╕▓р╕Б LINE
4. р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Гр╕Щр╣Бр╕Кр╕Ч

---

## ЁЯТм р╕Чр╕Фр╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ър╣Бр╕Кр╕Ч

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 1: р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ LINE

1. р╣Ар╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓ Settings р╣Гр╕Щр╣Бр╕нр╕Ы
2. р╣Гр╕кр╣И Channel Access Token
3. р╣Гр╕кр╣И Channel Secret
4. р╣Гр╕кр╣И ngrok/Cloudflare URL
5. р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 2: р╕Чр╕Фр╕кр╕нр╕Ър╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б

1. р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Ир╕▓р╕Б LINE
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓:
   - р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Бр╕кр╕Фр╕Зр╣Гр╕Щр╣Бр╕Кр╕Ч
   - р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Цр╕╣р╕Бр╣Ар╕Бр╣Зр╕Ър╣Гр╕Щ `line-webhook/data/messages.json`
   - р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Цр╕╣р╕Бр╣Ар╕Бр╣Зр╕Ър╣Гр╕Щ database (`pos_chat.db`)

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 3: р╕Чр╕Фр╕кр╕нр╕Ър╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б

1. р╣Ар╕ер╕╖р╕нр╕Бр╣Бр╕Кр╕Ч
2. р╕Юр╕┤р╕бр╕Юр╣Мр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б
3. р╕Бр╕Фр╕кр╣Ир╕З
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓:
   - р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Цр╕╣р╕Бр╕кр╣Ир╕Зр╣Др╕Ы LINE
   - р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Бр╕кр╕Фр╕Зр╣Гр╕Щр╣Бр╕Кр╕Ч
   - р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Цр╕╣р╕Бр╣Ар╕Бр╣Зр╕Ър╣Гр╕Щ database

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 4: р╕Чр╕Фр╕кр╕нр╕Ър╕Фр╕╢р╕Зр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕╕р╕в

**р╕Чр╕Фр╕кр╕нр╕Ъ API:**
```bash
# р╕Фр╕╢р╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Бр╕Кр╕Ч
curl http://localhost:3000/api/chats

# р╕Фр╕╢р╕Зр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕╕р╕в
curl http://localhost:3000/api/chats/U1234567890/messages

# р╕Фр╕╢р╕Зр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕╕р╕вр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
curl http://localhost:3000/api/chats/history/all

# р╕Фр╕╣р╕кр╕Цр╕┤р╕Хр╕┤
curl http://localhost:3000/api/chats/stats
```

**р╕лр╕гр╕╖р╕нр╣Ар╕Ыр╕┤р╕Фр╣Гр╕Щр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М:**
- http://localhost:3000/api/chats
- http://localhost:3000/api/chats/stats

---

## ЁЯТ╛ р╕Чр╕Фр╕кр╕нр╕Ър╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕ер╕░ Export

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 1: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е

**API:**
```bash
curl http://localhost:3000/api/database/info
```

**р╕лр╕гр╕╖р╕нр╣Ар╕Ыр╕┤р╕Фр╣Гр╕Щр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М:**
- http://localhost:3000/api/database/info

**р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щ:**
```json
{
  "available": true,
  "path": "C:\\...\\pos_chat.db",
  "size": 1234567,
  "stats": {
    "chats": 10,
    "messages": 150,
    "bills": 25
  }
}
```

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 2: р╕Чр╕Фр╕кр╕нр╕Ъ Export Excel

1. р╣Ар╕Ыр╕┤р╕Фр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М: http://localhost:3000/api/export/excel
2. р╣Др╕Яр╕ер╣Мр╕Ир╕░р╕Цр╕╣р╕Бр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф: `pos_chat_export_1234567890.xlsx`
3. р╣Ар╕Ыр╕┤р╕Фр╕Фр╣Йр╕зр╕в Excel
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡р╕Кр╕╡р╕Ч:
   - Chats
   - Messages
   - Bills
   - Bank Accounts
   - Shipping Companies
   - Settings

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 3: р╕Чр╕Фр╕кр╕нр╕Ъ Export Database

1. р╣Ар╕Ыр╕┤р╕Фр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М: http://localhost:3000/api/export/database
2. р╣Др╕Яр╕ер╣Мр╕Ир╕░р╕Цр╕╣р╕Бр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф: `pos_chat_1234567890.db`
3. р╣Ар╕Ыр╕┤р╕Фр╕Фр╣Йр╕зр╕в DB Browser for SQLite
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡р╕Хр╕▓р╕гр╕▓р╕З:
   - chats
   - messages
   - online_bills
   - bank_accounts
   - shipping_companies
   - settings
   - shop_data

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 4: р╕Чр╕Фр╕кр╕нр╕Ъ Backup

1. р╣Ар╕Ыр╕┤р╕Фр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М: http://localhost:3000/api/backup/all
2. р╣Др╕Яр╕ер╣Мр╕Ир╕░р╕Цр╕╣р╕Бр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф: `pos_chat_backup_1234567890.zip`
3. р╣Ар╕Ыр╕┤р╕Фр╣Др╕Яр╕ер╣М ZIP
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡:
   - `database/pos_chat.db`
   - `data/*.json`
   - `uploads/*`

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 5: р╕Чр╕Фр╕кр╕нр╕Ър╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕е

**р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 1: р╣Бр╕Бр╣Йр╣Др╕В JSON Files**
1. р╕лр╕вр╕╕р╕Ф server
2. р╣Бр╕Бр╣Йр╣Др╕В `line-webhook/data/chats.json`
3. р╣Ар╕гр╕┤р╣Ир╕б server р╣Гр╕лр╕бр╣И
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕Вр╣Йр╕нр╕бр╕╣р╕е sync р╣Др╕Ы database

**р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 2: р╣Бр╕Бр╣Йр╣Др╕В SQLite Database**
1. Export database: http://localhost:3000/api/export/database
2. р╣Ар╕Ыр╕┤р╕Фр╕Фр╣Йр╕зр╕в DB Browser for SQLite
3. р╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕е
4. р╕зр╕▓р╕Зр╣Др╕Яр╕ер╣Мр╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕Чр╕╡р╣И `line-webhook/data/pos_chat.db`
5. Restart server
6. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕Вр╣Йр╕нр╕бр╕╣р╕е sync р╣Др╕Ы JSON files

---

## ЁЯФД р╕Чр╕Фр╕кр╕нр╕Ъ Sync р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 1: р╣Ар╕Хр╕гр╕╡р╕вр╕бр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕Чр╕Фр╕кр╕нр╕Ъ

**р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З A (Server):**
- р╕гр╕▒р╕Щ server р╕Чр╕╡р╣И http://localhost:3000

**р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З B (Client):**
- р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З A р╣Др╕Фр╣Й (р╕Ьр╣Ир╕▓р╕Щ LAN р╕лр╕гр╕╖р╕н Cloudflare Tunnel)

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 2: р╕Чр╕Фр╕кр╕нр╕Ър╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕нр╕╖р╣Ир╕Щ

**р╕Ир╕▓р╕Бр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З B:**
```bash
# р╕Фр╕╢р╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Бр╕Кр╕Ч
curl http://MACHINE_A_IP:3000/api/chats

# р╕Фр╕╢р╕Зр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕╕р╕вр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
curl http://MACHINE_A_IP:3000/api/chats/sync/all
```

**р╕лр╕гр╕╖р╕нр╣Ар╕Ыр╕┤р╕Фр╣Гр╕Щр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М:**
- http://MACHINE_A_IP:3000/api/chats
- http://MACHINE_A_IP:3000/api/chats/sync/all

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 3: р╕Чр╕Фр╕кр╕нр╕Ъ Import р╕Вр╣Йр╕нр╕бр╕╣р╕е

**р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З A:**
```bash
# Export р╕Вр╣Йр╕нр╕бр╕╣р╕е
curl http://localhost:3000/api/chats/sync/all > chat_backup.json
```

**р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З B:**
```bash
# Import р╕Вр╣Йр╕нр╕бр╕╣р╕е
curl -X POST http://localhost:3000/api/chats/sync/import \
  -H "Content-Type: application/json" \
  -d @chat_backup.json
```

**р╕лр╕гр╕╖р╕нр╣Гр╕Кр╣Й Postman/Browser:**
1. POST http://localhost:3000/api/chats/sync/import
2. Body: JSON р╕Ир╕▓р╕Б `/api/chats/sync/all`
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Цр╕╣р╕Б import

---

## тЬЕ Checklist р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### р╕Бр╕▓р╕гр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕гр╕░р╕Ър╕Ъ
- [ ] Backend server р╕Чр╕│р╕Зр╕▓р╕Щ (port 3000)
- [ ] Frontend server р╕Чр╕│р╕Зр╕▓р╕Щ (port 8085)
- [ ] Database р╕Цр╕╣р╕Бр╕кр╕гр╣Йр╕▓р╕З (`pos_chat.db`)
- [ ] JSON files р╕Цр╕╣р╕Бр╕кр╕гр╣Йр╕▓р╕З

### Cloudflare Tunnel
- [ ] cloudflared.exe р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Бр╕ер╕░р╕зр╕▓р╕Зр╣Др╕зр╣Й
- [ ] Backend Tunnel р╕Чр╕│р╕Зр╕▓р╕Щ
- [ ] Frontend Tunnel р╕Чр╕│р╕Зр╕▓р╕Щ
- [ ] р╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╣Др╕Фр╣Йр╕Ир╕▓р╕Бр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕нр╕╖р╣Ир╕Щ
- [ ] LINE Webhook р╕Чр╕│р╕Зр╕▓р╕Щ

### р╕гр╕░р╕Ър╕Ър╣Бр╕Кр╕Ч
- [ ] р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ LINE р╕кр╕│р╣Ар╕гр╣Зр╕И
- [ ] р╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Ир╕▓р╕Б LINE р╣Др╕Фр╣Й
- [ ] р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Др╕Ы LINE р╣Др╕Фр╣Й
- [ ] р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Цр╕╣р╕Бр╣Ар╕Бр╣Зр╕Ър╣Гр╕Щ JSON files
- [ ] р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Цр╕╣р╕Бр╣Ар╕Бр╣Зр╕Ър╣Гр╕Щ database

### р╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕ер╕░ Export
- [ ] р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕Цр╕▓р╕Щр╕░ database р╣Др╕Фр╣Й
- [ ] Export Excel р╣Др╕Фр╣Й
- [ ] Export database р╣Др╕Фр╣Й
- [ ] Backup р╣Др╕Фр╣Й
- [ ] р╣Бр╕Бр╣Йр╣Др╕В JSON files р╣Др╕Фр╣Й
- [ ] р╣Бр╕Бр╣Йр╣Др╕В SQLite database р╣Др╕Фр╣Й

### Sync р╕Вр╣Йр╕нр╕бр╕╣р╕е
- [ ] р╕Фр╕╢р╕Зр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕╕р╕вр╣Др╕Фр╣Й
- [ ] Import р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕╕р╕вр╣Др╕Фр╣Й
- [ ] Sync р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╣Др╕Фр╣Й

---

## ЁЯЖШ Troubleshooting

### р╕Ыр╕▒р╕Нр╕лр╕▓: Backend р╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ

**р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ:**
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ port 3000 р╕Цр╕╣р╕Бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
netstat -ano | findstr :3000

# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ error logs
cd line-webhook
npm start
```

**р╣Бр╕Бр╣Йр╣Др╕В:**
- р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ port р╣Гр╕Щ `.env`: `PORT=3001`
- р╕Ыр╕┤р╕Фр╣Вр╕Ыр╕гр╣Бр╕Бр╕гр╕бр╕Чр╕╡р╣Ир╣Гр╕Кр╣Й port 3000

---

### р╕Ыр╕▒р╕Нр╕лр╕▓: Frontend р╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ

**р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ:**
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ port 8085 р╕Цр╕╣р╕Бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
netstat -ano | findstr :8085

# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ error logs
npm run dev
```

**р╣Бр╕Бр╣Йр╣Др╕В:**
- р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ port р╣Гр╕Щ `vite.config.js`
- р╕Ыр╕┤р╕Фр╣Вр╕Ыр╕гр╣Бр╕Бр╕гр╕бр╕Чр╕╡р╣Ир╣Гр╕Кр╣Й port 8085

---

### р╕Ыр╕▒р╕Нр╕лр╕▓: Database р╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕кр╕гр╣Йр╕▓р╕З

**р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ:**
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Др╕Яр╕ер╣М database р╕бр╕╡р╕нр╕вр╕╣р╣И
dir line-webhook\data\pos_chat.db

# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ error logs
cd line-webhook
npm start
```

**р╣Бр╕Бр╣Йр╣Др╕В:**
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ `better-sqlite3` р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╣Йр╕з: `npm install better-sqlite3`
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М `data` р╕бр╕╡р╕нр╕вр╕╣р╣И
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ permissions

---

### р╕Ыр╕▒р╕Нр╕лр╕▓: Cloudflare Tunnel р╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ

**р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ:**
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ cloudflared.exe р╕бр╕╡р╕нр╕вр╕╣р╣И
dir cloudflared.exe

# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ error logs
cloudflared.exe tunnel --url http://localhost:3000
```

**р╣Бр╕Бр╣Йр╣Др╕В:**
- р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф cloudflared.exe р╣Гр╕лр╕бр╣И
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Backend р╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣И
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ firewall

---

### р╕Ыр╕▒р╕Нр╕лр╕▓: LINE Webhook р╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ

**р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ:**
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Webhook URL р╣Гр╕Щ LINE Developers Console
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Backend Tunnel р╕вр╕▒р╕Зр╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣И
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Channel Access Token р╣Бр╕ер╕░ Secret

**р╣Бр╕Бр╣Йр╣Др╕В:**
- р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х Webhook URL
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ LINE Signature Verification
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ logs р╣Гр╕Щ Backend

---

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕бр╣И sync

**р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ:**
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕Цр╕▓р╕Щр╕░ database
curl http://localhost:3000/api/database/info

# Sync manual
curl -X POST http://localhost:3000/api/database/sync
```

**р╣Бр╕Бр╣Йр╣Др╕В:**
- р╣Ар╕гр╕╡р╕вр╕Б API sync manual
- Restart server
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ JSON files

---

### р╕Ыр╕▒р╕Нр╕лр╕▓: Export р╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ

**р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ:**
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ dependencies
cd line-webhook
npm list xlsx archiver
```

**р╣Бр╕Бр╣Йр╣Др╕В:**
- р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З dependencies: `npm install xlsx archiver`
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ error logs
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ permissions

---

## ЁЯУЪ р╣Ар╕нр╕Бр╕кр╕▓р╕гр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б

- [HOW_TO_RUN.md](./HOW_TO_RUN.md) - р╕зр╕┤р╕Шр╕╡р╕гр╕▒р╕Щр╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М
- [CLOUDFLARE_TUNNEL_SETUP.md](./CLOUDFLARE_TUNNEL_SETUP.md) - р╕Др╕╣р╣Ир╕бр╕╖р╕н Cloudflare Tunnel
- [DATABASE_GUIDE.md](./DATABASE_GUIDE.md) - р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е
- [CHAT_SYNC_GUIDE.md](./CHAT_SYNC_GUIDE.md) - р╕Др╕╣р╣Ир╕бр╕╖р╕н Sync р╣Бр╕Кр╕Ч

---

## ЁЯОп Quick Test Script

р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `quick_test.bat`:

```batch
@echo off
chcp 65001 >nul
echo ========================================
echo  ЁЯзк Quick Test Script
echo ========================================
echo.

echo ЁЯУЛ р╕Бр╕│р╕ер╕▒р╕Зр╕Чр╕Фр╕кр╕нр╕Ъ...
echo.

echo 1. р╕Чр╕Фр╕кр╕нр╕Ъ Backend Health...
curl http://localhost:3000/health
echo.

echo 2. р╕Чр╕Фр╕кр╕нр╕Ъ Database Info...
curl http://localhost:3000/api/database/info
echo.

echo 3. р╕Чр╕Фр╕кр╕нр╕Ъ Chats...
curl http://localhost:3000/api/chats
echo.

echo 4. р╕Чр╕Фр╕кр╕нр╕Ъ Chat Stats...
curl http://localhost:3000/api/chats/stats
echo.

echo.
echo тЬЕ р╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ!
pause
```

---

## ЁЯТб Tips

1. **р╣Гр╕Кр╣Й Browser DevTools** - р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Network requests
2. **р╣Гр╕Кр╣Й Postman** - р╕Чр╕Фр╕кр╕нр╕Ъ API endpoints
3. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Logs** - р╕Фр╕╣ console logs р╣Гр╕Щ Backend
4. **Backup р╕Бр╣Ир╕нр╕Щр╕Чр╕Фр╕кр╕нр╕Ъ** - р╣Гр╕Кр╣Й `/api/backup/all` р╕Бр╣Ир╕нр╕Щр╕Чр╕Фр╕кр╕нр╕Ъ
5. **р╕Чр╕Фр╕кр╕нр╕Ър╕Чр╕╡р╕ер╕░р╕кр╣Ир╕зр╕Щ** - р╕Чр╕Фр╕кр╕нр╕Ър╕Чр╕╡р╕ер╕░р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣М

---

**р╕Юр╕гр╣Йр╕нр╕бр╕Чр╕Фр╕кр╕нр╕Ър╣Бр╕ер╣Йр╕з! ЁЯЪА**

