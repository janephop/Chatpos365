# ‚úÖ Service ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à - ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ

## üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! Service ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß

‚úÖ **Cloudflared Service ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß**
- Status: **Running** ‚úÖ
- StartType: **Automatic** (‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á) ‚úÖ

---

## üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Public Hostname ‡πÉ‡∏ô Dashboard üåê

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà Cloudflare Dashboard ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ URL:

1. **‡πÑ‡∏õ‡∏ó‡∏µ‡πà Cloudflare Dashboard** ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà
   - URL: https://one.dash.cloudflare.com/
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà: **Networks** ‚Üí **Connectors** ‚Üí ‡∏Ñ‡∏•‡∏¥‡∏Å tunnel **"line-chat"**

2. **‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö "Public Hostnames"** ‡∏´‡∏£‡∏∑‡∏≠ **"Hostname routes"**

3. **‡∏Ñ‡∏•‡∏¥‡∏Å "Add a public hostname"** ‡∏´‡∏£‡∏∑‡∏≠ **"Add route"**

4. **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Backend (port 3000):**
   - **Hostname**: `line-chat-backend-12345.trycloudflare.com`
     - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `12345` ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡πÄ‡∏ä‡πà‡∏ô `12345`, `99999`, `abcde`)
     - **‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ trycloudflare.com** (‡∏ü‡∏£‡∏µ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠ domain)
   - **Service**: `http://localhost:3000`
   - **‡∏Ñ‡∏•‡∏¥‡∏Å "Save"** ‡∏´‡∏£‡∏∑‡∏≠ **"Add hostname"**

5. **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Frontend (port 8085):**
   - **‡∏Ñ‡∏•‡∏¥‡∏Å "Add a public hostname"** ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
   - **Hostname**: `line-chat-frontend-12345.trycloudflare.com`
     - ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Backend ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ
   - **Service**: `http://localhost:8085`
   - **‡∏Ñ‡∏•‡∏¥‡∏Å "Save"** ‡∏´‡∏£‡∏∑‡∏≠ **"Add hostname"**

6. **‡∏à‡∏î URL ‡∏ó‡∏±‡πâ‡∏á 2 ‡πÑ‡∏ß‡πâ:**
   - ‚úÖ **Backend URL**: `https://line-chat-backend-12345.trycloudflare.com`
   - ‚úÖ **Frontend URL**: `https://line-chat-frontend-12345.trycloudflare.com`

---

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå Config (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£) üìù

‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå config ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Dashboard:

‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `cloudflare-tunnel-config.yml` ‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç hostname ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô Dashboard:

```yaml
tunnel: ea4f26bd-8e88-4941-bc4d-2bf4a47e3abd
credentials-file: C:\Users\jay_rpn\.cloudflared\ea4f26bd-8e88-4941-bc4d-2bf4a47e3abd.json

ingress:
  # Backend (port 3000)
  - hostname: line-chat-backend-12345.trycloudflare.com  # ‚Üê ‡πÅ‡∏Å‡πâ‡πÄ‡∏õ‡πá‡∏ô URL ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô Dashboard
    service: http://localhost:3000
  # Frontend (port 8085)
  - hostname: line-chat-frontend-12345.trycloudflare.com  # ‚Üê ‡πÅ‡∏Å‡πâ‡πÄ‡∏õ‡πá‡∏ô URL ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô Dashboard
    service: http://localhost:8085
  # Catch-all
  - service: http_status:404
```

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** 
- ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ Managed Service (‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á) ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå config
- ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏ß‡πâ‡∏Å‡πá‡πÑ‡∏î‡πâ

---

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Frontend (.env) ‚öôÔ∏è

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env` ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå root (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ):

**‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env`:**
```
VITE_API_URL=https://line-chat-backend-12345.trycloudflare.com
```

**‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:** ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `12345` ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Backend URL ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô Dashboard

---

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô üöÄ

**‡∏£‡∏±‡∏ô Backend ‡πÅ‡∏•‡∏∞ Frontend:**

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)**
```bash
# ‡∏î‡∏±‡∏ö‡πÄ‡∏ö‡∏¥‡∏•‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ
START_PERMANENT.bat
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏£‡∏±‡∏ô‡πÄ‡∏≠‡∏á**
```bash
# Terminal 1: Backend
cd line-webhook
npm start

# Terminal 2: Frontend  
npm run dev
```

---

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL üåê

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß:

1. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö Backend URL:**
   - ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏õ‡∏ó‡∏µ‡πà: `https://line-chat-backend-12345.trycloudflare.com`
   - ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô response ‡∏à‡∏≤‡∏Å Backend

2. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö Frontend URL:**
   - ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏õ‡∏ó‡∏µ‡πà: `https://line-chat-frontend-12345.trycloudflare.com`
   - ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö Frontend

---

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 6: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE Webhook üì±

1. **‡πÑ‡∏õ‡∏ó‡∏µ‡πà LINE Developers Console:**
   - URL: https://developers.line.biz/console/

2. **‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Provider** ‚Üí **Channel** ‚Üí **Messaging API** tab

3. **Webhook settings** ‚Üí **Edit**

4. **‡πÉ‡∏™‡πà Webhook URL:**
   ```
   https://line-chat-backend-12345.trycloudflare.com/webhook/line
   ```
   (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `12345` ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Backend URL ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ)

5. **‡πÄ‡∏õ‡∏¥‡∏î "Use webhook"** = **Enabled**

6. **‡∏Ñ‡∏•‡∏¥‡∏Å "Verify"** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö

7. **‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!** ‚úÖ

**‚úÖ URL ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏≤‡∏ß‡∏£ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏≠‡∏µ‡∏Å!**

---

## üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Service

### ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Service:
```powershell
Get-Service Cloudflared
```

### ‡πÄ‡∏£‡∏¥‡πà‡∏° Service (‡∏ñ‡πâ‡∏≤‡∏´‡∏¢‡∏∏‡∏î):
```powershell
Start-Service Cloudflared
```

### ‡∏´‡∏¢‡∏∏‡∏î Service:
```powershell
Stop-Service Cloudflared
```

### Restart Service:
```powershell
Restart-Service Cloudflared
```

---

## ‚úÖ Checklist

- [x] ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Cloudflared Service ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- [x] Service ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (Running)
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Public Hostname ‡πÉ‡∏ô Dashboard (Backend)
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Public Hostname ‡πÉ‡∏ô Dashboard (Frontend)
- [ ] ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå cloudflare-tunnel-config.yml (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ .env ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Frontend
- [ ] ‡πÄ‡∏£‡∏¥‡πà‡∏° Backend ‡πÅ‡∏•‡∏∞ Frontend
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Backend URL
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Frontend URL
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE Webhook

---

## üí° ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

1. **Service ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (StartType: Automatic)
2. **‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á** `cloudflared.exe tunnel run` ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ (Service ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß)
3. **URL ‡∏à‡∏∞‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏≤‡∏ß‡∏£** ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô webhook ‡∏ö‡πà‡∏≠‡∏¢‡πÜ
4. **‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏Å‡∏±‡∏ö LINE Official Account** ‚úÖ

---

<div align="center">
üéâ **Service ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß! ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Public Hostname ‡πÉ‡∏ô Dashboard!** üåê
</div>

